# This query is returning data from a single collection, specified by the handle.
# In the Storefront API, the @inContext directive takes an optional country code argument, and applies this directive to the query or mutation.

# To present pricing in local currency, enable the market of the passed in country context within Markets in the Shopify Admin.

# If the country is not enabled in Markets, the currency of the active localized experience will be the store's default currency.

# Since products can contain multiple variants, we've asked the products connection to return price ranges.

# When the @inContext directive is used, the 'priceRange' object returns product price ranges in the context of the passed in country context.


query getPriceRangesForProductsInCollection($country: CountryCode $handle: String!)@inContext(country: $country) {
	collection(handle: $handle) {
		id
		title
		products(first: 50, sortKey: BEST_SELLING) {
			edges {
				node {
					id
					title
					vendor
					availableForSale
					images(first: 1) {
						edges {
							node {
								id
								url
								width
								height
								altText
							}
						}
					}
					priceRange {
						minVariantPrice {
							amount
							currencyCode
						}
						maxVariantPrice {
							amount
							currencyCode
						}
					}
				}
			}
		}
	}
}
