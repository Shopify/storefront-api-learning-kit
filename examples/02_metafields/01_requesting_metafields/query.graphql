# Metafields allow merchants to store additional information for Shopify resources including:
# - Products
# - Collections
# - Customers
# - Blogs
# - Pages
# - Shop

# Unlike the Admin API, metafields must first be made visible to the Storefront API.
# To make metafields visible to the Storefront API use the Shopify Admin API mutation metafieldStorefrontVisibilityCreate.
# For more information on the metafieldStorefrontVisibilityCreate mutation consult the Shopify Admin API doc https://shopify.dev/docs/admin-api/graphql/reference/metafields/metafieldstorefrontvisibilitycreate

# For a complete Storefront API metafield reference please consult the metafield tutorial at
# https://shopify.dev/tutorials/retrieve-metafields-with-storefront-api#expose-metafields-to-the-storefront-api

# Once the metafield for the given resource has been made visible to the Storefront API, it can be queried from that resource.

# For the resource types listed above, both a single metafield, and paginated list can be queried.

# The following example queries a product given an id filtering for a specific metafield and also for a list of metafields available on the product.

query getProductMetaField($id: ID!, $namespace: String!, $key: String!) {
	product(id: $id) {
		metafields(first: 1) {
			edges {
				node {
					id
				}
			}
		}

		metafield(namespace: $namespace, key: $key) {
			key
			value
			id
			definition {
				type {
					name
				}
				metafieldsCount
				visibleToStorefrontApi
			}
		}
	}
}
